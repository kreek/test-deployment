import{b as ft}from"../chunks/DZMBQUpx.js";import{s as ht,n as lt}from"../chunks/DYjCt7Qj.js";import{S as ut,i as vt,d,a as I,c as u,y as N,g as D,p as rt,h as v,j as q,s as P,b as s,m as z,e as L,f as T,t as C,z as _t}from"../chunks/D9H36_A6.js";function it(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}async function pt({fetch:a}){try{const t=new Date().getTime(),l=`${ft}/data/stats.json?t=${t}`;console.log("Fetching data from:",l);const e=await a(l);return e.ok?{stats:await e.json()}:(console.error(`Failed to load data: ${e.status} ${e.statusText}`),{stats:null,error:`Failed to load data: ${e.status} ${e.statusText}`})}catch(t){return console.error("Error loading stats:",t),{stats:null,error:"Failed to load data: "+(t.message||String(t))}}}const Dt=Object.freeze(Object.defineProperty({__proto__:null,load:pt},Symbol.toStringTag,{value:"Module"}));function ct(a,t,l){const e=a.slice();return e[3]=t[l],e}function mt(a){let t,l="Loading...";return{c(){t=v("p"),t.textContent=l},l(e){t=u(e,"P",{"data-svelte-h":!0}),N(t)!=="svelte-qdsr2u"&&(t.textContent=l)},m(e,n){I(e,t,n)},p:lt,d(e){e&&d(t)}}}function gt(a){let t,l,e,n=new Date(a[1].last_updated).toLocaleString()+"",m,h,r,o="Stats",b,g,x,j,S=a[1].stats.users+"",E,_,w,U,k=a[1].stats.events+"",V,K,A,Q,B=a[1].stats.average_response_time+"",Y,W,X,F,at="Recent Events",Z,H,R,nt='<tr><th class="svelte-1fdeqhx">ID</th> <th class="svelte-1fdeqhx">Event</th> <th class="svelte-1fdeqhx">Timestamp</th></tr>',$,M,O=it(a[1].events),p=[];for(let i=0;i<O.length;i+=1)p[i]=dt(ct(a,O,i));return{c(){t=v("div"),l=v("p"),e=C("Last Updated: "),m=C(n),h=q(),r=v("h2"),r.textContent=o,b=q(),g=v("ul"),x=v("li"),j=C("Users: "),E=C(S),_=q(),w=v("li"),U=C("Events: "),V=C(k),K=q(),A=v("li"),Q=C("Avg Response Time: "),Y=C(B),W=C("s"),X=q(),F=v("h2"),F.textContent=at,Z=q(),H=v("table"),R=v("thead"),R.innerHTML=nt,$=q(),M=v("tbody");for(let i=0;i<p.length;i+=1)p[i].c();this.h()},l(i){t=u(i,"DIV",{class:!0});var f=L(t);l=u(f,"P",{});var c=L(l);e=T(c,"Last Updated: "),m=T(c,n),c.forEach(d),h=D(f),r=u(f,"H2",{"data-svelte-h":!0}),N(r)!=="svelte-c6kcpv"&&(r.textContent=o),b=D(f),g=u(f,"UL",{});var y=L(g);x=u(y,"LI",{});var tt=L(x);j=T(tt,"Users: "),E=T(tt,S),tt.forEach(d),_=D(y),w=u(y,"LI",{});var et=L(w);U=T(et,"Events: "),V=T(et,k),et.forEach(d),K=D(y),A=u(y,"LI",{});var G=L(A);Q=T(G,"Avg Response Time: "),Y=T(G,B),W=T(G,"s"),G.forEach(d),y.forEach(d),X=D(f),F=u(f,"H2",{"data-svelte-h":!0}),N(F)!=="svelte-j0s73y"&&(F.textContent=at),Z=D(f),H=u(f,"TABLE",{class:!0});var J=L(H);R=u(J,"THEAD",{"data-svelte-h":!0}),N(R)!=="svelte-muhpcp"&&(R.innerHTML=nt),$=D(J),M=u(J,"TBODY",{});var ot=L(M);for(let st=0;st<p.length;st+=1)p[st].l(ot);ot.forEach(d),J.forEach(d),f.forEach(d),this.h()},h(){z(H,"class","svelte-1fdeqhx"),z(t,"class","stats svelte-1fdeqhx")},m(i,f){I(i,t,f),s(t,l),s(l,e),s(l,m),s(t,h),s(t,r),s(t,b),s(t,g),s(g,x),s(x,j),s(x,E),s(g,_),s(g,w),s(w,U),s(w,V),s(g,K),s(g,A),s(A,Q),s(A,Y),s(A,W),s(t,X),s(t,F),s(t,Z),s(t,H),s(H,R),s(H,$),s(H,M);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(M,null)},p(i,f){if(f&2&&n!==(n=new Date(i[1].last_updated).toLocaleString()+"")&&P(m,n),f&2&&S!==(S=i[1].stats.users+"")&&P(E,S),f&2&&k!==(k=i[1].stats.events+"")&&P(V,k),f&2&&B!==(B=i[1].stats.average_response_time+"")&&P(Y,B),f&2){O=it(i[1].events);let c;for(c=0;c<O.length;c+=1){const y=ct(i,O,c);p[c]?p[c].p(y,f):(p[c]=dt(y),p[c].c(),p[c].m(M,null))}for(;c<p.length;c+=1)p[c].d(1);p.length=O.length}},d(i){i&&d(t),_t(p,i)}}}function bt(a){let t,l;return{c(){t=v("p"),l=C(a[0]),this.h()},l(e){t=u(e,"P",{class:!0});var n=L(t);l=T(n,a[0]),n.forEach(d),this.h()},h(){z(t,"class","error svelte-1fdeqhx")},m(e,n){I(e,t,n),s(t,l)},p(e,n){n&1&&P(l,e[0])},d(e){e&&d(t)}}}function dt(a){let t,l,e=a[3].id+"",n,m,h,r=a[3].name+"",o,b,g,x=new Date(a[3].timestamp).toLocaleString()+"",j,S;return{c(){t=v("tr"),l=v("td"),n=C(e),m=q(),h=v("td"),o=C(r),b=q(),g=v("td"),j=C(x),S=q(),this.h()},l(E){t=u(E,"TR",{});var _=L(t);l=u(_,"TD",{class:!0});var w=L(l);n=T(w,e),w.forEach(d),m=D(_),h=u(_,"TD",{class:!0});var U=L(h);o=T(U,r),U.forEach(d),b=D(_),g=u(_,"TD",{class:!0});var k=L(g);j=T(k,x),k.forEach(d),S=D(_),_.forEach(d),this.h()},h(){z(l,"class","svelte-1fdeqhx"),z(h,"class","svelte-1fdeqhx"),z(g,"class","svelte-1fdeqhx")},m(E,_){I(E,t,_),s(t,l),s(l,n),s(t,m),s(t,h),s(h,o),s(t,b),s(t,g),s(g,j),s(t,S)},p(E,_){_&2&&e!==(e=E[3].id+"")&&P(n,e),_&2&&r!==(r=E[3].name+"")&&P(o,r),_&2&&x!==(x=new Date(E[3].timestamp).toLocaleString()+"")&&P(j,x)},d(E){E&&d(t)}}}function Et(a){let t,l="Dashboard",e,n;function m(o,b){return o[0]?bt:o[1]?gt:mt}let h=m(a),r=h(a);return{c(){t=v("h1"),t.textContent=l,e=q(),r.c(),n=rt()},l(o){t=u(o,"H1",{"data-svelte-h":!0}),N(t)!=="svelte-101alym"&&(t.textContent=l),e=D(o),r.l(o),n=rt()},m(o,b){I(o,t,b),I(o,e,b),r.m(o,b),I(o,n,b)},p(o,[b]){h===(h=m(o))&&r?r.p(o,b):(r.d(1),r=h(o),r&&(r.c(),r.m(n.parentNode,n)))},i:lt,o:lt,d(o){o&&(d(t),d(e),d(n)),r.d(o)}}}function Tt(a,t,l){let e,n,{data:m}=t;return a.$$set=h=>{"data"in h&&l(2,m=h.data)},a.$$.update=()=>{a.$$.dirty&4&&l(1,{stats:e,error:n}=m,e,(l(0,n),l(2,m)))},[n,e,m]}class qt extends ut{constructor(t){super(),vt(this,t,Tt,Et,ht,{data:2})}}export{qt as component,Dt as universal};
