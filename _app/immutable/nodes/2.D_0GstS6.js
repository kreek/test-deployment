import{s as ft,n as lt}from"../chunks/DYjCt7Qj.js";import{S as ht,i as ut,d as c,a as P,c as u,y as N,g as D,p as rt,h as v,j as q,s as A,b as l,m as z,e as L,f as T,t as C,z as vt}from"../chunks/D9H36_A6.js";function it(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}async function _t({fetch:a}){try{const t=new Date().getTime(),e=await a(`/data/stats.json?t=${t}`);return e.ok?{stats:await e.json()}:(console.error(`Failed to load data: ${e.status} ${e.statusText}`),{stats:null,error:`Failed to load data: ${e.status} ${e.statusText}`})}catch(t){return console.error("Error loading stats:",t),{stats:null,error:"Failed to load data: "+(t.message||String(t))}}}const Lt=Object.freeze(Object.defineProperty({__proto__:null,load:_t},Symbol.toStringTag,{value:"Module"}));function dt(a,t,e){const s=a.slice();return s[3]=t[e],s}function pt(a){let t,e="Loading...";return{c(){t=v("p"),t.textContent=e},l(s){t=u(s,"P",{"data-svelte-h":!0}),N(t)!=="svelte-qdsr2u"&&(t.textContent=e)},m(s,n){P(s,t,n)},p:lt,d(s){s&&c(t)}}}function mt(a){let t,e,s,n=new Date(a[1].last_updated).toLocaleString()+"",m,h,r,o="Stats",b,g,x,j,S=a[1].stats.users+"",E,_,w,U,k=a[1].stats.events+"",V,K,I,Q,B=a[1].stats.average_response_time+"",Y,W,X,R,at="Recent Events",Z,H,F,nt='<tr><th class="svelte-1fdeqhx">ID</th> <th class="svelte-1fdeqhx">Event</th> <th class="svelte-1fdeqhx">Timestamp</th></tr>',$,M,O=it(a[1].events),p=[];for(let i=0;i<O.length;i+=1)p[i]=ct(dt(a,O,i));return{c(){t=v("div"),e=v("p"),s=C("Last Updated: "),m=C(n),h=q(),r=v("h2"),r.textContent=o,b=q(),g=v("ul"),x=v("li"),j=C("Users: "),E=C(S),_=q(),w=v("li"),U=C("Events: "),V=C(k),K=q(),I=v("li"),Q=C("Avg Response Time: "),Y=C(B),W=C("s"),X=q(),R=v("h2"),R.textContent=at,Z=q(),H=v("table"),F=v("thead"),F.innerHTML=nt,$=q(),M=v("tbody");for(let i=0;i<p.length;i+=1)p[i].c();this.h()},l(i){t=u(i,"DIV",{class:!0});var f=L(t);e=u(f,"P",{});var d=L(e);s=T(d,"Last Updated: "),m=T(d,n),d.forEach(c),h=D(f),r=u(f,"H2",{"data-svelte-h":!0}),N(r)!=="svelte-c6kcpv"&&(r.textContent=o),b=D(f),g=u(f,"UL",{});var y=L(g);x=u(y,"LI",{});var tt=L(x);j=T(tt,"Users: "),E=T(tt,S),tt.forEach(c),_=D(y),w=u(y,"LI",{});var et=L(w);U=T(et,"Events: "),V=T(et,k),et.forEach(c),K=D(y),I=u(y,"LI",{});var G=L(I);Q=T(G,"Avg Response Time: "),Y=T(G,B),W=T(G,"s"),G.forEach(c),y.forEach(c),X=D(f),R=u(f,"H2",{"data-svelte-h":!0}),N(R)!=="svelte-j0s73y"&&(R.textContent=at),Z=D(f),H=u(f,"TABLE",{class:!0});var J=L(H);F=u(J,"THEAD",{"data-svelte-h":!0}),N(F)!=="svelte-muhpcp"&&(F.innerHTML=nt),$=D(J),M=u(J,"TBODY",{});var ot=L(M);for(let st=0;st<p.length;st+=1)p[st].l(ot);ot.forEach(c),J.forEach(c),f.forEach(c),this.h()},h(){z(H,"class","svelte-1fdeqhx"),z(t,"class","stats svelte-1fdeqhx")},m(i,f){P(i,t,f),l(t,e),l(e,s),l(e,m),l(t,h),l(t,r),l(t,b),l(t,g),l(g,x),l(x,j),l(x,E),l(g,_),l(g,w),l(w,U),l(w,V),l(g,K),l(g,I),l(I,Q),l(I,Y),l(I,W),l(t,X),l(t,R),l(t,Z),l(t,H),l(H,F),l(H,$),l(H,M);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(M,null)},p(i,f){if(f&2&&n!==(n=new Date(i[1].last_updated).toLocaleString()+"")&&A(m,n),f&2&&S!==(S=i[1].stats.users+"")&&A(E,S),f&2&&k!==(k=i[1].stats.events+"")&&A(V,k),f&2&&B!==(B=i[1].stats.average_response_time+"")&&A(Y,B),f&2){O=it(i[1].events);let d;for(d=0;d<O.length;d+=1){const y=dt(i,O,d);p[d]?p[d].p(y,f):(p[d]=ct(y),p[d].c(),p[d].m(M,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=O.length}},d(i){i&&c(t),vt(p,i)}}}function gt(a){let t,e;return{c(){t=v("p"),e=C(a[0]),this.h()},l(s){t=u(s,"P",{class:!0});var n=L(t);e=T(n,a[0]),n.forEach(c),this.h()},h(){z(t,"class","error svelte-1fdeqhx")},m(s,n){P(s,t,n),l(t,e)},p(s,n){n&1&&A(e,s[0])},d(s){s&&c(t)}}}function ct(a){let t,e,s=a[3].id+"",n,m,h,r=a[3].name+"",o,b,g,x=new Date(a[3].timestamp).toLocaleString()+"",j,S;return{c(){t=v("tr"),e=v("td"),n=C(s),m=q(),h=v("td"),o=C(r),b=q(),g=v("td"),j=C(x),S=q(),this.h()},l(E){t=u(E,"TR",{});var _=L(t);e=u(_,"TD",{class:!0});var w=L(e);n=T(w,s),w.forEach(c),m=D(_),h=u(_,"TD",{class:!0});var U=L(h);o=T(U,r),U.forEach(c),b=D(_),g=u(_,"TD",{class:!0});var k=L(g);j=T(k,x),k.forEach(c),S=D(_),_.forEach(c),this.h()},h(){z(e,"class","svelte-1fdeqhx"),z(h,"class","svelte-1fdeqhx"),z(g,"class","svelte-1fdeqhx")},m(E,_){P(E,t,_),l(t,e),l(e,n),l(t,m),l(t,h),l(h,o),l(t,b),l(t,g),l(g,j),l(t,S)},p(E,_){_&2&&s!==(s=E[3].id+"")&&A(n,s),_&2&&r!==(r=E[3].name+"")&&A(o,r),_&2&&x!==(x=new Date(E[3].timestamp).toLocaleString()+"")&&A(j,x)},d(E){E&&c(t)}}}function bt(a){let t,e="Dashboard",s,n;function m(o,b){return o[0]?gt:o[1]?mt:pt}let h=m(a),r=h(a);return{c(){t=v("h1"),t.textContent=e,s=q(),r.c(),n=rt()},l(o){t=u(o,"H1",{"data-svelte-h":!0}),N(t)!=="svelte-101alym"&&(t.textContent=e),s=D(o),r.l(o),n=rt()},m(o,b){P(o,t,b),P(o,s,b),r.m(o,b),P(o,n,b)},p(o,[b]){h===(h=m(o))&&r?r.p(o,b):(r.d(1),r=h(o),r&&(r.c(),r.m(n.parentNode,n)))},i:lt,o:lt,d(o){o&&(c(t),c(s),c(n)),r.d(o)}}}function Et(a,t,e){let s,n,{data:m}=t;return a.$$set=h=>{"data"in h&&e(2,m=h.data)},a.$$.update=()=>{a.$$.dirty&4&&e(1,{stats:s,error:n}=m,s,(e(0,n),e(2,m)))},[n,s,m]}class xt extends ht{constructor(t){super(),ut(this,t,Et,bt,ft,{data:2})}}export{xt as component,Lt as universal};
